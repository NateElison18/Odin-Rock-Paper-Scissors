<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div id="headerContainer">
            <h1>Rock, Paper, Scissors!</h1>
            <div id="scoreContainer">
                <div class="playerScore">
                    <h2>CPU:</h2>
                    <h2>0</h2> 
                </div>

                <div class="playerScore">
                    <h2>You:</h2>
                    <h2>0</h2> 
                </div>
            </div>

        </div>
        <div id="buttonContainer">
            <div class="button">
                <img src="images/oncoming-fist-skin-2-emoji.svg" alt="emoji hand shaped like a fist">                
                <h2>Rock</h2>
            </div>

            <div class="button">
                <img src="images/waving-hand-sign-tone-3.svg" alt="emoji hand shaped like a fist">                
                <h2>Paper</h2>
            </div>

            <div class="button">
                <img id="scissorsImg" src="images/victory-hand-medium-light-skin-tone.svg" alt="emoji hand shaped like a fist">                
                <h2>Scissors</h2>
            </div>
        </div>



        <script>

            game();

            //Functions:

            // 1 = rock, 2 = paper, 3 = scissors
            function getComputerChoice() {
                const choice = Math.floor(Math.random() * 3) + 1;
                switch(choice) {
                    case 1:
                        return "rock";
                    case 2:
                        return "paper";
                    default: 
                        return "scissors";
                }
            }

            function playRound(playerSelection, computerSelection) {
                let result = "";                 
                playerSelection = playerSelection.toLowerCase();

                switch(playerSelection) {
                    case "rock":
                        switch(computerSelection) {
                            case "paper": 
                                result = "You Lose! Paper beats Rock.";
                                break;   

                            case "scissors": 
                                result = "You Win! Rock beats Scissors.";
                                break;                                
                        }
                        break;    
                    
                    case "paper":
                        switch(computerSelection) {
                                case "rock": 
                                    result = "You Win! Paper beats Rock.";
                                    break;

                                case "scissors": 
                                    result = "You Lose! Scissors beats Paper.";
                                    break;                                
                            }
                        break;

                    case "scissors": 
                        switch(computerSelection) {
                                case "rock": 
                                    result = "You Lose! Rock beats Scissors.";
                                    break;

                                case "paper": 
                                    result = "You Win! Scissors beats Paper.";
                                    break;                                    
                            }
                        break;
                }
                if(result === "") { // If theres a tie, replay round
                    return (playRound(playerSelection, getComputerChoice()));
                }
                return result;
            }

            function game() {
                let userScore = 0;
                let computerScore = 0;
                let result = "";

                for (let i = 0; i < 5; i++) {
                    let computerSelection = getComputerChoice();
                    let playerSelection = prompt("Rock, Paper, Scissors! What's your pick? ");

                    result = playRound(playerSelection, computerSelection);
                    console.log(result);

                    if (result.includes("Win!")) {
                        userScore++;
                    } else {
                        computerScore++;
                    }

                    if (i === 4 || computerScore >= 3 || userScore >= 3) // Break loop in loop 5 or after a player reaches 3 wins to not show final score twice in a row
                        break;

                    console.log("Scores:");
                    console.log("User Score: " + userScore + " | Computer Score: " + computerScore);
                }

                if (userScore > computerScore) {
                    console.log("You Win!! YAYAYAYAYA!!")
                    console.log("Final Scores:");
                    console.log("User Score: " + userScore + " | Computer Score: " + computerScore);
                } else {
                    console.log("You Lose :( Try again");
                    console.log("Final Scores:");
                    console.log("User Score: " + userScore + " | Computer Score: " + computerScore);
                }  

            }

        </script>
    </body>
</html>